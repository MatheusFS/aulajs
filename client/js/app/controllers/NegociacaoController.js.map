{"version":3,"sources":["../../app-es6/controllers/NegociacaoController.js"],"names":["NegociacaoController","$","document","querySelector","bind","_inputData","_inputQuantidade","_inputValor","_listaNegociacoes","Bind","ListaNegociacoes","NegociacoesView","_mensagem","Mensagem","MensagemView","_service","NegociacoesService","_init","render","then","negociacoes","forEach","add","negociacao","catch","texto","err","event","preventDefault","_createNegociacao","insert","mensagem","_resetForm","import","empty","Negociacao","DateHelper","stringToDate","value","parseInt","parseFloat","focus"],"mappings":";;;;;;IAAMA,oB;AAEF,oCAAa;AAAA;;AAET,YAAIC,IAAIC,SAASC,aAAT,CAAuBC,IAAvB,CAA4BF,QAA5B,CAAR;AACA,aAAKG,UAAL,GAAkBJ,EAAE,OAAF,CAAlB;AACA,aAAKK,gBAAL,GAAwBL,EAAE,aAAF,CAAxB;AACA,aAAKM,WAAL,GAAmBN,EAAE,QAAF,CAAnB;AACA,aAAKO,iBAAL,GAAyB,IAAIC,IAAJ,CAAS,IAAIC,gBAAJ,EAAT,EAAiC,IAAIC,eAAJ,CAAoBV,EAAE,kBAAF,CAApB,CAAjC,EAA6E,KAA7E,EAAmF,OAAnF,CAAzB;AACA,aAAKW,SAAL,GAAiB,IAAIH,IAAJ,CAAS,IAAII,QAAJ,EAAT,EAAyB,IAAIC,YAAJ,CAAiBb,EAAE,eAAF,CAAjB,CAAzB,EAA+D,OAA/D,CAAjB;AACA,aAAKc,QAAL,GAAgB,IAAIC,kBAAJ,EAAhB;AACA,aAAKC,KAAL;AACH;;;;gCAEM;AAAA;;AAEH,iBAAKF,QAAL,CACCG,MADD,GAECC,IAFD,CAEM;AAAA,uBACFC,YAAYC,OAAZ,CAAoB;AAAA,2BAChB,MAAKb,iBAAL,CAAuBc,GAAvB,CAA2BC,UAA3B,CADgB;AAAA,iBAApB,CADE;AAAA,aAFN,EAKCC,KALD,CAKO;AAAA,uBAAO,MAAKZ,SAAL,CAAea,KAAf,GAAuBC,GAA9B;AAAA,aALP;AAMH;;;4BAEGC,K,EAAM;AAAA;;AAENA,kBAAMC,cAAN;;AAEA,gBAAIL,aAAa,KAAKM,iBAAL,EAAjB;;AAEA,iBAAKd,QAAL,CACCe,MADD,CACQP,UADR,EAECJ,IAFD,CAEM,oBAAY;AACd,uBAAKX,iBAAL,CAAuBc,GAAvB,CAA2BC,UAA3B;AACA,uBAAKX,SAAL,CAAea,KAAf,GAAuBM,QAAvB;AACA,uBAAKC,UAAL;AACH,aAND,EAOCR,KAPD,CAOO;AAAA,uBAAO,OAAKZ,SAAL,CAAea,KAAf,GAAuBC,GAA9B;AAAA,aAPP;AAQH;;;kCAEO;AAAA;;AAEJ,iBAAKX,QAAL,CACKkB,MADL,CACY,KAAKzB,iBADjB,EAEKW,IAFL,CAEU,uBAAe;AACjBC,4BAAYC,OAAZ,CAAoB;AAAA,2BAAc,OAAKb,iBAAL,CAAuBc,GAAvB,CAA2BC,UAA3B,CAAd;AAAA,iBAApB;AACA,uBAAKX,SAAL,CAAea,KAAf,GAAuB,oCAAvB;AACH,aALL,EAMKD,KANL,CAMW;AAAA,uBAAO,OAAKZ,SAAL,CAAea,KAAf,GAAuBC,GAA9B;AAAA,aANX;AAOH;;;gCAEM;AAAA;;AAEH,iBAAKX,QAAL,CACCmB,KADD,GAECf,IAFD,CAEM,oBAAY;AACd,uBAAKX,iBAAL,CAAuB0B,KAAvB;AACA,uBAAKtB,SAAL,CAAea,KAAf,GAAuBM,QAAvB;AACH,aALD,EAMCP,KAND,CAMO;AAAA,uBAAO,OAAKZ,SAAL,CAAea,KAAf,GAAuBC,GAA9B;AAAA,aANP;AAOH;;;4CAEkB;;AAEf,mBAAO,IAAIS,UAAJ,CACHC,WAAWC,YAAX,CAAwB,KAAKhC,UAAL,CAAgBiC,KAAxC,CADG,EAEHC,SAAS,KAAKjC,gBAAL,CAAsBgC,KAA/B,CAFG,EAGHE,WAAW,KAAKjC,WAAL,CAAiB+B,KAA5B,CAHG,CAAP;AAKH;;;qCAEW;;AAER,iBAAKjC,UAAL,CAAgBiC,KAAhB,GAAwB,EAAxB;AACA,iBAAKhC,gBAAL,CAAsBgC,KAAtB,GAA8B,CAA9B;AACA,iBAAK/B,WAAL,CAAiB+B,KAAjB,GAAyB,GAAzB;AACA,iBAAKjC,UAAL,CAAgBoC,KAAhB;AACH","file":"NegociacaoController.js","sourcesContent":["class NegociacaoController {\r\n    \r\n    constructor(){\r\n\r\n        let $ = document.querySelector.bind(document);\r\n        this._inputData = $('#data');\r\n        this._inputQuantidade = $('#quantidade');\r\n        this._inputValor = $('#valor');\r\n        this._listaNegociacoes = new Bind(new ListaNegociacoes(), new NegociacoesView($('#negociacoesView')), 'add','empty');\r\n        this._mensagem = new Bind(new Mensagem(), new MensagemView($('#mensagemView')), 'texto');\r\n        this._service = new NegociacoesService();\r\n        this._init();\r\n    }\r\n\r\n    _init(){\r\n\r\n        this._service\r\n        .render()\r\n        .then(negociacoes =>\r\n            negociacoes.forEach(negociacao =>\r\n                this._listaNegociacoes.add(negociacao)))\r\n        .catch(err => this._mensagem.texto = err);\r\n    }\r\n    \r\n    add(event){\r\n\r\n        event.preventDefault();\r\n\r\n        let negociacao = this._createNegociacao();\r\n\r\n        this._service\r\n        .insert(negociacao)\r\n        .then(mensagem => {\r\n            this._listaNegociacoes.add(negociacao);\r\n            this._mensagem.texto = mensagem;\r\n            this._resetForm();\r\n        })\r\n        .catch(err => this._mensagem.texto = err);\r\n    }\r\n\r\n    import(){\r\n\r\n        this._service\r\n            .import(this._listaNegociacoes)\r\n            .then(negociacoes => {\r\n                negociacoes.forEach(negociacao => this._listaNegociacoes.add(negociacao));\r\n                this._mensagem.texto = 'Negociações importadas com sucesso';\r\n            })\r\n            .catch(err => this._mensagem.texto = err);\r\n    }\r\n\r\n    empty(){\r\n\r\n        this._service\r\n        .empty()\r\n        .then(mensagem => {\r\n            this._listaNegociacoes.empty();\r\n            this._mensagem.texto = mensagem\r\n        })\r\n        .catch(err => this._mensagem.texto = err);\r\n    }\r\n    \r\n    _createNegociacao(){\r\n\r\n        return new Negociacao(\r\n            DateHelper.stringToDate(this._inputData.value),\r\n            parseInt(this._inputQuantidade.value),\r\n            parseFloat(this._inputValor.value)\r\n        );\r\n    }\r\n    \r\n    _resetForm(){\r\n\r\n        this._inputData.value = '';\r\n        this._inputQuantidade.value = 1;\r\n        this._inputValor.value = 0.0;\r\n        this._inputData.focus();\r\n    }\r\n}"]}